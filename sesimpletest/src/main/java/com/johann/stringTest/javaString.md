### java字符串概述;

- 字符串（String类）是java常用类之一，位于java.util包下。
- 字符串是字符序列，它不是基本数据类型，而是对象。
- String字符串是不可变的，一旦创建变无法更改。
- 字符串可以通过使用双引号来快捷创建其对象，这些字符串对象也被成为字符串常量。
- 字符串是唯一支持运算符重载的Java类，我们可以使用“ +”运算符来拼接两个字符串。
- Java将字符串对象存储在特定的预定义区域中，字符串池是Java堆空间中存储字符串的一部分。
- 字符串本质上是可序列化的，并实现可序列化接口。

String对象两种不同的创建方式

1，使用双引号创建。这是最简单也是首选的创建字符串对象的方式，它将在字符串常量池中创建一个字符串对象。

2，使用new关键字创建。使用new创建的字符串对象，存储在堆内存中，对象指向的也是堆内存中的对象，而不是字符串池中的同值对象。

```java
1, String s1 = "hello java"; 
2, String s2 = new String("hello java");
```

### 字符串常量池

又叫全局字符串常量池，存在于Java Heap中

#### 字符串池工作方式

1，当我们创建一个字符串时，它存储在字符串池中。

2，如果字符串池中已经有一个具有相同值的字符串，则不会创建新的字符串对象。返回对现有字符串对象的引用。

3，Java字符串池是字符串对象的缓存。因为字符串是不可变的使得这一实现成为可能。

4，如果我们使用new关键字创建一个string对象，它将在堆内存中创建。如果要将它移动到字符串池，可以使用intern()方法。

5，字符串池是Flyweight设计模式的一个实现例子。

#### 字符串池例子

```java
public class JavaStringPool {
 
    public static void main(String[] args) {
        String s1 = "Hello";
        String s2 = "Hello";
        String s3 = new String("Hi");
        String s4 = "Hi";
 
        System.out.println("s1 == s2? " + (s1 == s2));
        System.out.println("s3 == s4? " + (s3 == s4));
 
        s3 = s3.intern();
        System.out.println("s3 == s4? " + (s3 == s4));
    }
}
```
```text
1,当我们创建第一个字符串s1时，字符串池中没有字面量为“Hello”的字符串。因此，将在池中创建一个字符串“Hello”，并将其引用分配给s1。
2,当我们创建第二个字符串s2时，字符串池中已经有一个字面量为“Hello”的字符串。现有的字符串引用被分配给s2。
3,当我们创建第三个字符串s3时，它是在堆区域中创建的，因为我们使用了new关键字。
4,当我们创建第四个字符串s4时，将在池中创建一个字面量为“Hi”的字符串，并将其引用分配给s4。
5,当我们比较s1 == s2时，它返回true，因为两个变量都引用同一个字符串对象。
6,当我们比较s3 == s4时，它返回false，因为它们指向不同的字符串对象。
7.当我们在s3上调用intern()方法时，它检查池中是否有字面量为“Hi”的字符串?因为在字符串池中已经有了这个字面量的字符串，所以它的引用被返回并分配给s3。
8.现在比较s3 == s4返回true，因为两个变量都引用了相同的字符串对象。
```

#### 一共创建了几个字符串？

当我们使用 String s = new String("hello")创建字符串对象时，一共创建了几个字符串呢？答案是一个或两个。

如果在字符串池中已存在“hello”，那么就只在堆内存中创建一个值为“hello”的字符串；
如果在字符串池中不存在“hello”，那么会先在字符串池中创建一个值为“hello”的字符串，然后在堆内存中再创建一个值为“hello”的字符串对象。

